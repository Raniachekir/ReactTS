{"version":3,"file":"index.js","sources":["../src/types.js","../src/actions.js","../src/SnackbarProvider.js","../src/withSnackbar.js","../src/reducer.js"],"sourcesContent":["export const SHOW = '@@snackbar/SHOW'\nexport const DISMISS = '@@snackbar/DISMISS'\n","import { SHOW, DISMISS } from './types'\n\nconst show = (payload) => ({\n  type: SHOW,\n  payload\n})\n\nconst dismiss = (payload) => ({\n  type: DISMISS,\n  payload\n})\n\nexport default { show, dismiss }\n","/* eslint-disable react/no-did-update-set-state */\n/* eslint-disable react/prop-types */\nimport React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport actions from './actions'\nimport { connect } from 'react-redux'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport MuiAlert from '@material-ui/lab/Alert'\n\nconst Alert = (props) => {\n  return <MuiAlert elevation={6} variant='filled' {...props} />\n}\n\nclass SnackbarProvider extends PureComponent {\n  state = {\n    open: false,\n    close: false,\n    message: null,\n    variant: 'default',\n    action: null,\n    direction: {\n      vertical: 'bottom',\n      horizontal: 'right'\n    }\n  }\n\n  getChildContext() {\n    return {\n      snackbar: {\n        show: this.props.show\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.snackbar !== prevProps.snackbar) {\n      if (this.props.snackbar) {\n        if (this.state.open) {\n          this.setState({ open: false })\n        } else {\n          this.processQueue()\n        }\n      }\n    }\n  }\n\n  handleClose = (event, reason) => {\n    if (reason === 'clickaway') return\n    this.setState({ open: false, handleAction: null })\n  }\n\n  handleExited = () => {\n    this.processQueue()\n  }\n\n  handleActionClick = () => {\n    this.handleClose()\n    this.state.handleAction()\n  }\n\n  processQueue = () => {\n    if (this.props.snackbar) {\n      const { message, action, handleAction, close, variant, direction } = this.props.snackbar.options\n      if (variant) {\n        this.setState({ variant })\n      }\n      this.setState({ open: true, message, action, close, direction, handleAction })\n      this.props.dismiss(this.props.snackbar.id)\n    }\n  }\n\n  render() {\n    const { children, SnackbarProps = {}, direction } = this.props\n    const { message, open, variant } = this.state\n\n    return (\n      <React.Fragment>\n        {children}\n        <Snackbar {...SnackbarProps}\n          open={open}\n          anchorOrigin={direction}\n          onClose={this.handleClose}\n          onExited={this.handleExited}\n        >\n          <Alert onClose={() => this.handleClose()} severity={variant}>\n            {message || ''}\n          </Alert>\n        </Snackbar>\n      </React.Fragment>\n    )\n  }\n}\n\nSnackbarProvider.childContextTypes = {\n  snackbar: PropTypes.object\n}\n\nSnackbarProvider.propTypes = {\n  children: PropTypes.node,\n  SnackbarProps: PropTypes.object\n}\n\nexport default connect(\n  state => ({\n    snackbar: state.snackbar.queue[0] || null\n  }),\n  dispatch => ({\n    show: (options) => dispatch(actions.show({ options })),\n    dismiss: (id) => dispatch(actions.dismiss({ id }))\n  })\n)(SnackbarProvider)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nfunction withSnackbar() {\n  return (Component) => {\n    const ComponentWithSnackbar = (props, { snackbar }) => (\n      <Component\n        snackbar={snackbar}\n        {...props}\n      />\n    )\n\n    ComponentWithSnackbar.contextTypes = {\n      snackbar: PropTypes.object.isRequired\n    }\n\n    return ComponentWithSnackbar\n  }\n}\n\nexport default withSnackbar\n","import { SHOW, DISMISS } from './types'\n\nconst initialState = {\n  queue: []\n}\n\nexport default (state = initialState, { type, payload } = {}) => {\n  switch (type) {\n    case SHOW:\n      return { queue: [...state.queue, { id: Date.now(), ...payload }] }\n    case DISMISS:\n      return { queue: state.queue.filter((snackbar) => snackbar.id !== payload.id) }\n    default:\n      return state\n  }\n}\n"],"names":["SHOW","DISMISS","show","payload","dismiss","Alert","props","React","SnackbarProvider","state","handleClose","event","reason","setState","open","handleAction","handleExited","processQueue","handleActionClick","snackbar","options","message","action","close","variant","direction","id","prevProps","prevState","children","SnackbarProps","PureComponent","childContextTypes","PropTypes","object","propTypes","node","connect","queue","dispatch","actions","withSnackbar","Component","ComponentWithSnackbar","contextTypes","isRequired","initialState","type","Date","now","filter"],"mappings":"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"}